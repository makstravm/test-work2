for(let t=0;t<localStorage.length;t++){let e=localStorage.key(t),s=JSON.parse(localStorage.getItem(e)),l=document.createElement("div");l.className="films__item",l.control=!1,l.setAttribute("id",`${s.id}`),l.innerHTML=`<div class="films__item-wrapper">
    <div class="films__item-img">
      <img src=${s.poster} alt="film image">
    </div>
    <div class="films__inner">
    <h2 class="films__title films__correct-input">
    ${s.title}
    </h2>
    <p class="films__description films__correct-textarea">
   ${s.description}
    </p>
    <div class="films__box">
      <span class="films__group">country</span>
      <span class="films__name films__correct-input films__country">${s.country}</span>
    </div>
    <div class="films__box">
      <span class="films__group">year</span>
      <span class="films__name films__correct-input films__year">${s.year}</span>
    </div>
    <div class="films__box">
      <span class="films__group ">Genre</span>
      <span class="films__name films__correct-input films__genre">${s.genre}</span>
    </div>
    <div class="films__box">
      <span class="films__group">actors</span>
      <span class="films__name films__correct-textarea films__actors">${s.actors}</span>
    </div>
    <button class="btn btn__cancel film__del">Delete</button>
    <button class="btn btn__add film__edit">Edit</button>
    </div>
    </div>
    <div class="films__commnts comments">
    <button class="comments__btn">Comments: <span class="comments__count">3</span>
    <svg width='18px' height='12px' fill="#ff7e70" viewBox="0 0 320 512">
      <path
        d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z">
      </path>
    </svg>
    </button>
    <div class="comments__inner">
    <div class="comments__items">
    </div >
    <textarea class="form-add__textarea comments__textarea" placeholder="Add your comment"></textarea>
    <button class="btn btn__add comment__add">Add</button>
    </div > 
  </div > `,document.querySelector(".films .container").append(l);for(let t=0;t<s.comments.length;t++){let e=document.createElement("div");e.className="comments__item",e.innerHTML=s.comments[t],l.querySelector(".comments__items").append(e)}}function addClassActive(){this.classList.toggle("--active"),this.nextElementSibling.classList.toggle("--active")}document.querySelector(".header__btn").addEventListener("click",()=>{document.querySelector(".header__btn").classList.toggle("--active"),document.querySelector(".form-add").classList.toggle("--active")}),document.querySelector(".form__cancel").addEventListener("click",()=>{document.querySelector(".header__btn").classList.remove("--active"),document.querySelector(".form-add").classList.remove("--active")});const commentsBtnArray=document.getElementsByClassName("comments__btn");for(let e=0;e<commentsBtnArray.length;e++)commentsBtnArray[e].addEventListener("click",addClassActive);let comments=document.getElementsByClassName("comments");for(let e=0;e<comments.length;e++){let l=comments[e],n={comments:[]};l.querySelector(".comments__count").innerHTML=l.getElementsByClassName("comments__item").length,l.querySelector(".comment__add").addEventListener("click",function(){if(l.querySelector(".comments__textarea").value.trim()){var s=l.closest(".films__item").getAttribute("id");let e=document.createElement("div"),t=n.comments;e.className="comments__item",e.innerHTML=l.querySelector(".comments__textarea").value,t.push(l.querySelector(".comments__textarea").value),l.querySelector(".comments__items").append(e),l.querySelector(".comments__count").innerHTML=l.getElementsByClassName("comments__item").length,l.querySelector(".comments__textarea").value="",localStorage.setItem(s,JSON.stringify(n))}})}function filmsItemRemove(){this.closest(".films__item").remove();var e=this.closest(".films__item").getAttribute("id");localStorage.removeItem(e)}const filmDelete=document.getElementsByClassName("film__del");for(let e=0;e<filmDelete.length;e++)filmDelete[e].addEventListener("click",filmsItemRemove);document.querySelector(".form__add").addEventListener("click",()=>{let n={id:(new Date).getTime(),title:document.getElementById("title").value,year:document.getElementById("year").value,country:document.getElementById("country").value,genre:document.getElementById("genre").value,poster:document.getElementById("poster").value,actors:document.getElementById("actors").value,description:document.getElementById("description").value,comments:[]},i=document.createElement("div");i.className="films__item",i.control=!1,i.setAttribute("id",`${n.id} `),i.innerHTML=`<div class="films__item-wrapper" >
    <div class="films__item-img">
      <img src=${n.poster} alt="film image">
    </div>
    <div class="films__inner">
    <h2 class="films__title films__correct-input">
    ${n.title}
    </h2>
    <p class="films__description films__correct-textarea">
   ${n.description}
    </p>
    <div class="films__box">
      <span class="films__group">country</span>
      <span class="films__name films__correct-input films__country">${n.country}</span>
    </div>
    <div class="films__box">
      <span class="films__group">year</span>
      <span class="films__name films__correct-input films__year">${n.year}</span>
    </div>
    <div class="films__box">
      <span class="films__group ">Genre</span>
      <span class="films__name films__correct-input films__genre">${n.genre}</span>
    </div>
    <div class="films__box">
      <span class="films__group">actors</span>
      <span class="films__name films__correct-textarea films__actors">${n.actors}</span>
    </div>
    <button class="btn btn__cancel film__del">Delete</button>
    <button class="btn btn__add film__edit">Edit</button>
    </div>
    </div>
    <div class="films__commnts comments">
    <button class="comments__btn">Comments: <span class="comments__count">3</span>
    <svg width='18px' height='12px' fill="#ff7e70" viewBox="0 0 320 512">
      <path
        d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z">
      </path>
    </svg>
    </button>
    <div class="comments__inner">
      <div class="comments__items">
      </div>
    <textarea class="form-add__textarea comments__textarea" placeholder="Add your comment"></textarea>
    <button class="btn btn__add comment__add">Add</button>
    </div> 
  </div>`,document.querySelector(".films .container").append(i),i.querySelector(".comments__btn").addEventListener("click",addClassActive),i.querySelector(".film__del").addEventListener("click",filmsItemRemove),i.querySelector(".comments__count").innerHTML=i.getElementsByClassName("comments__item").length,i.querySelector(".comment__add").addEventListener("click",function(){if(i.querySelector(".comments__textarea").value.trim()){let e=n.comments,t=document.createElement("div");t.className="comments__item",t.innerHTML=i.querySelector(".comments__textarea").value,e.push(i.querySelector(".comments__textarea").value),i.querySelector(".comments__items").append(t),i.querySelector(".comments__count").innerHTML=i.getElementsByClassName("comments__item").length,i.querySelector(".comments__textarea").value="",localStorage.setItem(n.id,JSON.stringify(n))}}),i.querySelector(".film__edit").addEventListener("click",function(){let s=i.getElementsByClassName("films__correct-input"),l=i.getElementsByClassName("films__correct-textarea");var e=this.closest(".films__item").getAttribute("id");if(i.control){n.title=this.parentElement.querySelector(".films__title input").value,n.year=this.parentElement.querySelector(".films__year input").value,n.country=this.parentElement.querySelector(".films__country input").value,n.genre=this.parentElement.querySelector(".films__genre input").value,n.description=this.parentElement.querySelector(".films__description textarea").value,n.actors=this.parentElement.querySelector(".films__actors textarea").value,localStorage.setItem(e,JSON.stringify(n));for(let e=0;e<s.length;e++)s[e].innerHTML=s[e].querySelector("input").value;for(let e=0;e<l.length;e++)l[e].innerHTML=l[e].querySelector("textarea").value;return i.control=!1}for(let t=0;t<s.length;t++){let e=document.createElement("input");e.className="correct-input",e.value=s[t].innerHTML.trim(),s[t].innerHTML="",s[t].appendChild(e)}for(let t=0;t<l.length;t++){let e=document.createElement("textarea");e.className="correct-input",e.value=l[t].innerHTML.trim(),l[t].innerHTML="",l[t].appendChild(e)}return i.control=!0}),localStorage.setItem(n.id,JSON.stringify(n))});let editItem=document.getElementsByClassName("film__edit");for(let e=0;e<editItem.length;e++){let n=!1;editItem[e].addEventListener("click",function(){let e={};var t=this.closest(".films__item").getAttribute("id");let s=this.parentElement.getElementsByClassName("films__correct-input"),l=this.parentElement.getElementsByClassName("films__correct-textarea");if(n){e.title=this.parentElement.querySelector(".films__title input").value,e.year=this.parentElement.querySelector(".films__year input").value,e.country=this.parentElement.querySelector(".films__country input").value,e.genre=this.parentElement.querySelector(".films__genre input").value,e.description=this.parentElement.querySelector(".films__description textarea").value,e.actors=this.parentElement.querySelector(".films__actors textarea").value,localStorage.setItem(t,JSON.stringify(e));for(let e=0;e<s.length;e++)s[e].innerHTML=s[e].querySelector("input").value;for(let e=0;e<l.length;e++)l[e].innerHTML=l[e].querySelector("textarea").value;return n=!1}for(let t=0;t<s.length;t++){let e=document.createElement("input");e.value=s[t].innerHTML.trim(),s[t].innerHTML="",s[t].appendChild(e)}for(let t=0;t<l.length;t++){let e=document.createElement("textarea");e.value=l[t].innerHTML.trim(),l[t].innerHTML="",l[t].appendChild(e)}return n=!0})}